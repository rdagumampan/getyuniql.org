<!DOCTYPE html>
<html lang="en-us">

<head>
  <meta name="generator" content="Hugo 0.92.0" />
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title> Yuniql CLI Command Reference </title>

  
  <meta name="description" content="Rich CLI commands and parameters for running migrations locally and on continuous integration server."> 
  
  
  
  
  

  

  <meta name="author" content="Rodel E. Dagumampan">


  <meta property="og:title" content="Yuniql CLI Command Reference" />
<meta property="og:description" content="Rich CLI commands and parameters for running migrations locally and on continuous integration server." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://yuniql.io/docs/yuniql-cli-command-reference/" /><meta property="article:section" content="docs" />




  




  
  
  
  
  

  <link rel="canonical" href="https://yuniql.io/docs/yuniql-cli-command-reference/">  

  <link rel="shortcut icon" type="image/png" href="/images/logos/favicon.png">


  <link href="/css/font.css" rel="stylesheet" type="text/css">
  <link href="/css/kube.min.css" rel="stylesheet" type="text/css">
  <link href="/css/kube.legenda.css" rel="stylesheet" type="text/css">
  <link href="/css/highlight.css" rel="stylesheet" type="text/css">
  <link href="/css/master.css" rel="stylesheet" type="text/css">
  <link href="/css/kube.demo.css" rel="stylesheet" type="text/css">

 <link href="/css/custom.css" rel="stylesheet" type="text/css">

  <script src="/js/jquery-2.1.4.min.js" type="text/javascript">
  </script>

  <script type="text/javascript" src="/js/tocbot.min.js"></script>

  
  <link href="/prism-tomorrow.css" rel="stylesheet" type="text/css">
  
</head>


<body class="page-kube">

  
  
  <a href="https://github.com/rdagumampan/yuniql" class="github-corner" aria-label="View source on GitHub" target="blank"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

  <header> <div class="show-sm">
    <div id="nav-toggle-box">
      <div id="nav-toggle-brand">
        <a href="/">YUNIQL</a>
      </div><a data-component="toggleme" data-target="#top" href="#" id="nav-toggle"><i class="kube-menu"></i></a>
    </div>
  </div>
  <div class="hide-sm" id="top">
    <div id="top-brand">
      <a href="/" title="home">YUNIQL</a>
    </div>
    <nav id="top-nav-main">
      <ul>
       
       
    <li><a href="/docs/why-yuniql/" >Why yuniql</a></li>
    
    <li><a href="/docs/how-yuniql-works/" >How it works</a></li>
    
    <li><a href="/docs" >Documentation</a></li>
    
    <li><a href="https://github.com/rdagumampan/yuniql/issues/new" >Report issue</a></li>
    
      </ul>
    </nav>
    <nav id="top-nav-extra"> 
      <ul>
          
      </ul>
    </nav>
  </div>
 </header>
  <main>
  <div id="main">
    <div id="hero">
      <h1> Yuniql CLI Command Reference </h1>
      <p class="hero-lead">
           Command Line Interface (CLI) commands and parameters.
      </p>

    </div> 
    <div id="kube-component" class="content">
    

    <p>Yuniql CLI is powerful interface to prepare and run migrations from developer&rsquo;s IDE, DBA&rsquo;s machine or thru continuous integration server. Database developers can follow these CLI sequence calls to prepare local db version before commiting to git repository:</p>
<ul>
<li><code>yuniql init</code> / initializes db project structure</li>
<li><code>yuniql run</code> / runs migrations</li>
<li><code>yuniql list</code> / shows existing versions applied</li>
<li><code>yuniql erase</code> / cleans up when done local testing</li>
</ul>
<h5 id="yuniql-init"><strong><code>yuniql init</code></strong></h5>
<hr>
<p>Creates baseline directory structure that serves as your database migration workspace. Commit this into your preferred source control platform such as <code>git</code>, <code>tfs vc</code> or <code>svn</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">yuniql init <span style="color:#f92672">[</span>-p|--path<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>-d|--debug<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>--help<span style="color:#f92672">]</span>
</code></pre></div><ul>
<li>
<p><code>-p &quot;c:\temp\demo&quot; | --path &quot;c:\temp\demo&quot;</code></p>
<p>Creates initial directory structure in the target directory. Defaults to current directory of the CLI.</p>
</li>
<li>
<p><code>-d | --debug</code></p>
<p>Runs command with <code>DEBUG</code> tracing enabled.</p>
</li>
<li>
<p><code>--help</code></p>
<p>Shows the CLI command reference on screen.</p>
</li>
</ul>
<h5 id="yuniql-run"><strong><code>yuniql run</code></strong></h5>
<hr>
<p>Inspects the target database and creates the required table to track the versions. All script files in <code>_init</code> directory will be executed on first run. The order of execution is as follows <code>_init</code>,<code>_pre</code>,<code>vx.xx</code>,<code>_draft</code>,<code>_post</code>. Several variations on how we can run migration are listed below.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">yuniql run <span style="color:#f92672">[</span>-p|--path<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>-c|--connection-string<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>-a|--auto-create-db<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>-t|--target-version<span style="color:#f92672">]</span> 
    <span style="color:#f92672">[</span>-k|--token<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>--platform<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>--environment<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>--bulk-separator<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>--bulk-batch-size<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>--command-timeout<span style="color:#f92672">]</span> 
    <span style="color:#f92672">[</span>--meta-schema<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>--meta-table<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>--continue-after-failure<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>-d|--debug<span style="color:#f92672">]</span>
</code></pre></div><ul>
<li>
<p><code>-p &quot;c:\temp\demo&quot; | --path &quot;c:\temp\demo&quot;</code></p>
<p>Runs migration from target directory. Defaults to current directory of the CLI.</p>
</li>
<li>
<p><code>-c &quot;&lt;value&gt;&quot; | --connection-string &quot;&lt;value&gt;&quot;</code></p>
<p>Runs migration using the specified connection string. Defaults to environment variable <code>YUNIQL_CONNECTION_STRING</code>. See environment variables.</p>
</li>
<li>
<p><code>-a | --auto-create-db</code></p>
<p>Creates target database if the database does not exists. Defaults to <code>false</code>.</p>
</li>
<li>
<p><code>--platform &quot;postgresql&quot;</code></p>
<p>Runs migration targetting PostgreSql database. Defaults to <code>sqlserver</code>. See supported platforms.</p>
</li>
<li>
<p><code>-t &quot;v1.05&quot; | --target-version &quot;v1.05&quot;</code></p>
<p>Runs migration only up to the version <code>v1.05</code> skipping <code>v1.06</code> or later. Defaults to latest available version locally.</p>
</li>
<li>
<p><code>-k &quot;&lt;key&gt;=&lt;value&gt;,&lt;key&gt;=&lt;value&gt;&quot; | --token &quot;&lt;key&gt;=&lt;value&gt;,&lt;key&gt;=&lt;value&gt;&quot;</code></p>
<p>Replace each tokens in each script file. This is very helpful when you have environment specific sql-statements such as cross-server queries where database names are suffixed by the environment.</p>
</li>
<li>
<p><code>--bulk-separator &quot;;&quot;</code></p>
<p>Runs bulk import of CSV files using <code>;</code> as bulk values separator. Defaults to <code>;</code>;</p>
</li>
<li>
<p><code>--bulk-batch-size &quot;300&quot;</code></p>
<p>Bulk import batch size for platforms supporting batch rows.. Defaults to <code>0</code>;</p>
</li>
<li>
<p><code>--environment &quot;DEV&quot;</code></p>
<p>Environment code for environment-aware scripts.</p>
</li>
<li>
<p><code>--command-timeout 120</code></p>
<p>The time in seconds to wait for the each command to execute. Defaults to 30 secs.</p>
</li>
<li>
<p><code>--meta-schema</code></p>
<p>Schema name for schema versions table.</p>
</li>
<li>
<p><code>--meta-table</code></p>
<p>Table name for schema versions table.</p>
</li>
<li>
<p><code>--continue-after-failure</code></p>
<p>Skip failed script and continue with migration (Only for platforms which doesn&rsquo;t fully support transactions</p>
</li>
<li>
<p><code>-d | --debug</code></p>
<p>Runs command with <code>DEBUG</code> tracing enabled. Prints raw sql statements before their execution.</p>
</li>
<li>
<p><code>--help</code></p>
<p>Shows the CLI command reference on screen.</p>
</li>
</ul>
<h5 id="yuniql-list"><strong><code>yuniql list</code></strong></h5>
<hr>
<p>Shows all version currently present in the target database.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">yuniql list <span style="color:#f92672">[</span>-p|--path<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>-c|--connection-string<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>--platform<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>--command-timeout<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>-d|--debug<span style="color:#f92672">]</span>
</code></pre></div><ul>
<li>
<p><code>-p &quot;c:\temp\demo&quot; | --path &quot;c:\temp\demo&quot;</code></p>
<p>Runs command from target directory. Defaults to current directory of the CLI.</p>
</li>
<li>
<p><code>-c &quot;&lt;value&gt;&quot; | --connection-string &quot;&lt;value&gt;&quot;</code></p>
<p>Runs command using the specified connection string. Defaults to environment variable <code>YUNIQL_CONNECTION_STRING</code>. See environment variables.</p>
</li>
<li>
<p><code>--platform &quot;postgresql&quot;</code></p>
<p>Runs command targetting <code>PostgreSql</code> database. Defaults to <code>sqlserver</code>. See supported platforms.</p>
</li>
<li>
<p><code>--command-timeout 120</code></p>
<p>The time in seconds to wait for the each command to execute. Defaults to 30 secs.</p>
</li>
<li>
<p><code>-d | --debug</code></p>
<p>Runs command with <code>DEBUG</code> tracing enabled. Prints raw sql statements before their execution.</p>
</li>
<li>
<p><code>--help</code></p>
<p>Shows the CLI command reference on screen.</p>
</li>
</ul>
<h5 id="yuniql-erase"><strong><code>yuniql erase</code></strong></h5>
<hr>
<p>Discovers and executes all scripts placed in the <code>_erase</code> directory. This is especially useful in dev and test environment where teams cannot auto-create new database each test case. The execution is immutable and enclosed in single transaction. The list of objects to drop, the order of when they will be dropped must be manually prepared.</p>
<blockquote>
<p>NOTE: Yuniql does not automatically create drop scripts but instead rely on users to prepare the appropriate way of clearing the database objects. With this, you can segment environment-specific clean-up scripts; example is when you may not want to drop permissions in DB when you are performing integration tests.</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">yuniql erase <span style="color:#f92672">[</span>-p|--path<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>-c|--connection-string<span style="color:#f92672">]</span>  <span style="color:#f92672">[</span>-k|--token<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>--platform<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>--command-timeout<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>--force<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>-d|--debug<span style="color:#f92672">]</span>
</code></pre></div><ul>
<li>
<p><code>-p &quot;c:\temp\demo&quot; | --path &quot;c:\temp\demo&quot;</code></p>
<p>Runs command from target directory. Defaults to current directory of the CLI.</p>
</li>
<li>
<p><code>-c &quot;&lt;value&gt;&quot; | --connection-string &quot;&lt;value&gt;&quot;</code></p>
<p>Runs command using the specified connection string. Defaults to environment variable <code>YUNIQL_CONNECTION_STRING</code>. See environment variables.</p>
</li>
<li>
<p><code>--platform &quot;postgresql&quot;</code></p>
<p>Runs command targetting <code>PostgreSql</code> database. Defaults to <code>sqlserver</code>. See supported platforms.</p>
</li>
<li>
<p><code>--force</code></p>
<p>Runs erase command without asking for confirmation. [Not yet implemented].</p>
</li>
<li>
<p><code>--command-timeout 120</code></p>
<p>The time in seconds to wait for the each command to execute. Defaults to 30 secs.</p>
</li>
<li>
<p><code>-d | --debug</code></p>
<p>Runs command with <code>DEBUG</code> tracing enabled. Prints raw sql statements before their execution.</p>
</li>
<li>
<p><code>--help</code></p>
</li>
</ul>
<blockquote>
<p>WARNING: Be very careful when using this function as it has SEVERE consequences when run in PRODUCTION. Make sure to remove this pipeline task if you are cloning CI/CD pipelines from your DevOps tool.</p>
</blockquote>
<h5 id="yuniql-vnext"><strong><code>yuniql vnext</code></strong></h5>
<hr>
<p>Identifies the latest version locally and increments the minor version with the format <code>v{major}.{minor}</code>. The command just helps keeping the semantic consistent and this can also be done manually.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">yuniql vnext <span style="color:#f92672">[</span>-p|--path<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>-M|--major<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>-m|--minor<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>-f|--file<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>-d|--debug<span style="color:#f92672">]</span> 
</code></pre></div><ul>
<li>
<p><code>-p &quot;c:\temp\demo&quot; | --path &quot;c:\temp\demo&quot;</code></p>
<p>Creates new version in the target directory. Defaults to current directory of the CLI.</p>
</li>
<li>
<p><code>-m | --minor</code></p>
<p>Increments major version by creating <code>vx.xx+1</code> folder. Default when not passed.</p>
</li>
<li>
<p><code>-M | --major</code></p>
<p>Increments minor version by creating <code>vx+1.xx</code> folder.</p>
</li>
<li>
<p><code>-f | --file &lt;file-name.sql&gt;</code></p>
<p>Creates an empty sql file in the created major or minor version.</p>
</li>
<li>
<p><code>-d | --debug</code></p>
<p>Runs command with <code>DEBUG</code> tracing enabled.</p>
</li>
<li>
<p><code>--help</code></p>
<p>Shows the CLI command reference on screen.</p>
</li>
</ul>
<h5 id="yuniql-verify"><strong><code>yuniql verify</code></strong></h5>
<hr>
<p>Checks if all your versions can be executed without errors. It runs through all the non-versioned script folders (except <code>_init</code>) and all migration steps that <code>yuninql run</code> takes but without committing the transaction. All changes are rolled-back after a successful verification run.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">yuniql verify <span style="color:#f92672">[</span>-p|--path<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>-c|--connection-string<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>-t|--target-version<span style="color:#f92672">]</span> 
    <span style="color:#f92672">[</span>-k|--token<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>--bulk-separator<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>--platform<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>--command-timeout<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>--environment<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>-d|--debug<span style="color:#f92672">]</span>
</code></pre></div><blockquote>
<p>NOTE: Because it relies on an existing database, you can only use <code>verify</code> on database already baselined or versioned.</p>
</blockquote>
<h5 id="yuniql-version"><strong><code>yuniql version</code></strong></h5>
<p>Shows the current version of yuniql CLI running.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">yuniql version
</code></pre></div><h4 id="learn-further">Learn further</h4>
<ul>
<li><a href="https://yuniql.io/docs/migrate-via-aspnetcore-application/">Migrate via ASP.NET Core</a></li>
<li><a href="https://yuniql.io/docs/migrate-via-azure-devops-pipelines/">Migrate via Azure DevOps</a></li>
<li><a href="https://yuniql.io/docs/migrate-via-docker-container/">Migrate via Docker Container</a></li>
<li><a href="https://yuniql.io/docs/migrate-via-netcore-console-application/">Migrate via Console Application</a></li>
</ul>
<h4 id="found-bugs">Found bugs?</h4>
<p>Help us improve further please <a href="https://github.com/rdagumampan/yuniql/issues/new">create an issue</a>.</p>


    

    <h4 id="comments">Comments</h4>
    <div id="commento"></div>
    <script src="https://cdn.commento.io/js/commento.js"></script>

    </div>
    </div>
</main>
  <footer>   <footer id="footer">
    <nav>
      <ul>
        <li><span>YUNIQL</span></li>
        <li>
          <a href="https://github.com/rdagumampan/yuniql">Code</a>
        </li>
        <li>
          <a href="/docs/">Docs</a>
        </li>
          <li>
            <a href="/blog/">Blog</a>
        </li>
        <li>
          <a href="https://twitter.com/rdagumampan">Give a shout-out on Twitter!</a>
        </li>
      </ul>
    </nav>
    <p>&copy; Licence Apache v2.0 | YUNIQL is maintanined by Rodel E. Dagumampan</p>
  </footer> </footer>


  <script src="/js/kube.js" type="text/javascript">
  </script>
  <script src="/js/kube.legenda.js" type="text/javascript">
  </script>
  <script src="/js/master.js" type="text/javascript">
  </script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.19.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.19.0/plugins/autoloader/prism-autoloader.min.js"></script>

</body>

</html>
